# UniSchedule Generator (Desktop, Python)

Десктопное приложение для генерации расписания ВУЗа на базе генеративного алгоритма (`OR-Tools CP-SAT`) с визуальным интерфейсом (`CustomTkinter`).

## Запуск

```bash
python -m venv .venv
.venv\Scripts\activate
pip install -r requirements.txt
python app.py
```

## Что умеет MVP

- Генерировать расписание с учетом ограничений:
  - занятость и рабочие дни ППС,
  - пересечения по ППС, группам и аудиториям,
  - периоды дисциплин по неделям (например 15 или 3 недели),
  - ограничения по смене группы (с какой пары можно начинать/заканчивать),
  - вместимость и тип аудитории (лекция/лаб/практика),
  - фиксированные аудитории и фиксированные слоты.
- Просматривать занятость аудиторий по неделям.
- Просматривать расписание преподавателя по неделям.
- Выполнять замену аудитории или ППС и перегенерировать расписание.
- Редактировать рабочий график ППС через таблицу чекбоксов (дни/слоты).
- Импорт/экспорт Excel (XLSX), экспорт расписания в Excel.
- Автоматически пересчитывать количество пар/неделю по кредитам дисциплины.

## Архитектура

- `app.py` - точка входа.
- `scheduler_desktop/models.py` - доменные модели.
- `scheduler_desktop/planning.py` - генеративный планировщик CP-SAT.
- `scheduler_desktop/repository.py` - хранилище состояния (XLSX/JSON) + демо-данные.
- `scheduler_desktop/excel_io.py` - импорт/экспорт состояния в Excel (листы по сущностям).
- `scheduler_desktop/ui.py` - desktop UI.
- `docs/competitor_analysis.md` - краткий анализ существующих классов решений.

## Покрытие требований

1. Ограничения преподавателей - `Да` (рабочие дни, блок-слоты, нагрузка в день/неделю).
2. Уникальность преподавателя (дни/время) - `Да`.
3. Гибкость при внезапной смене плана - `Да` (замены + фиксация слота + перегенерация).
4. Разные сроки обучения студента и работы преподавателя - `Да` (окна недель у групп/ППС).
5. Точность длительности дисциплин по кредитам - `Частично` (автопересчет пар/нед, формулу можно настроить под регламент ВУЗа).
6. Подгруппы/потоки у одного ППС - `Да` (явные потоки `streams` + потоковые лекции через `stream_id`).
7. Практика как lab-исключение - `Частично` (поддержан тип `practice`, логику исключений можно дорасширить).
8. Дисциплины в конкретных аудиториях - `Да`.
9. Анализ других программ - `Да` (документ `docs/competitor_analysis.md`).
10. Просмотр занятости аудитории - `Да`.
11. Расписание для преподавателя - `Да`.
12. Уникальность учебного плана для подгрупп (вместе/раздельно) - `Частично` (реализуется через назначения; можно добавить мастер разбиения).
13. За ППС закрепляются атрибуты (должность, кафедра, степень, аудитория) - `Да`.
14. При закреплении дисциплины/групп задается аудитория - `Да`.
15. Закрепление рабочего графика ППС (таблица/галочки) - `Да`.
16. Замена аудитории или ППС - `Да`.
17. Задание дней работы, исключения (например военка), лимиты занятий/день - `Да`.
18. Выбор аудитории/потока и периода дисциплины - `Да`.
19. Смены групп (до/после обеда, с определенной пары) - `Да`.

## Примечания по развитию

- Для промышленного контура стоит добавить:
  - полноценные CRUD-формы вместо JSON-редактора,
  - роли пользователей и аудит изменений,
  - экспорт в XLSX/PDF,
  - покрытие автотестами ограничений на реальных данных ВУЗа.
